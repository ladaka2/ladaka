<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user">

	<resultMap type="java.util.HashMap" id="hashmap"></resultMap>

	<select id="selectUserLogin" resultMap="hashmap">
		SELECT
		EMAIL, PSWORD
		FROM
		USER
		WHERE 1=1
		AND EMAIL = '${EMAIL}'
		AND PSWORD = '${PSWORD}'
		LIMIT 1
	</select>

	<insert id="insertUserLogin" parameterType="hashmap">
		INSERT INTO USER (
		USER_IDX
		, EMAIL
		, NICKNAME
		, PSWORD
		, GENDER
		, BORNYEAR
		, DELETE_YN
		, INSERT_DATE
		, INSERT_ID
		) VALUES (
		(SELECT IFNULL(MAX(USER_IDX), 0)+1 FROM USER A)
		, '${EMAIL}'
		, '${NICKNAME}'
		, '${PSWORD}'
		, '${GENDER}'
		, '${BORNYEAR}'
		, 'N'
		, NOW()
		, '${insertId}'
		)
	</insert>

	<select id="selectUserLogin2" resultMap="hashmap">
		SELECT
		REGIST_NUM, PSWORD
		FROM USER_HOS
		WHERE 1=1
		AND REGIST_NUM = '${REGIST_NUM}'
		AND PSWORD =
		'${PSWORD}'
		LIMIT 1
	</select>

</mapper>